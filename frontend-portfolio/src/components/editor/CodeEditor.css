/* Animation typewriter avec masque */
@keyframes typewriter-mask {
  from {
    width: 100%;
  }
  to {
    width: 0;
  }
}

/* Animation du curseur clignotant */
@keyframes blink {
  0%,
  100% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
}

/* Style de base pour toutes les lignes animées */
.typing-line {
  position: relative;
  width: max-content; /* Prend uniquement la largeur du contenu */
  display: flex; /* Pour assurer que la ligne ne prenne que la largeur de son contenu */
}

/* Forcer une largeur minimale pour les lignes avec accolades */
.typing-line-14,
.typing-line-16,
.typing-line-18 {
  min-width: 200px; /* Force une largeur minimale pour ces lignes */
  padding-right: 10px; /* Ajoute de l'espace à droite */
}

/* Masque qui se retire progressivement */
.typing-line::before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  background-color: var(
    --bg-ui-color,
    #111827
  ); /* Utilise la couleur bg-bg-ui si disponible */
  z-index: 1;
  animation-fill-mode: forwards;
}

/* Curseur clignotant - caché par défaut sauf pour la dernière ligne */
.typing-line::after {
  content: "";
  position: absolute;
  right: 0; /* Positionnement initial à droite */
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  height: 1em;
  background-color: #64ffda;
  opacity: 0; /* Invisible par défaut */
  z-index: 2;
  visibility: hidden; /* Complètement caché pour toutes les lignes sauf la dernière */
}

/* Animation spécifique pour chaque ligne avec des délais ACCÉLÉRÉS x2 */
.typing-line-1::before {
  animation: typewriter-mask 0.3s steps(20) 0.05s forwards;
  width: 100%;
}

.typing-line-3::before {
  animation: typewriter-mask 0.3s steps(30) 0.35s forwards;
  width: 100%;
}

.typing-line-5::before {
  animation: typewriter-mask 0.25s steps(20) 0.75s forwards;
  width: 100%;
}

.typing-line-6::before {
  animation: typewriter-mask 0.25s steps(20) 1s forwards;
  width: 100%;
}

.typing-line-7::before {
  animation: typewriter-mask 0.3s steps(25) 1.2s forwards;
  width: 100%;
}

.typing-line-8::before {
  animation: typewriter-mask 0.4s steps(40) 1.5s forwards;
  width: 100%;
}

.typing-line-9::before {
  animation: typewriter-mask 0.25s steps(28) 1.9s forwards;
  width: 100%;
}

.typing-line-10::before {
  animation: typewriter-mask 0.15s steps(5) 2.15s forwards;
  width: 100%;
}

.typing-line-12::before {
  animation: typewriter-mask 0.35s steps(30) 2.25s forwards;
  width: 100%;
}

.typing-line-14::before {
  animation: typewriter-mask 0.3s steps(25) 2.6s forwards;
  width: 100%;
}

.typing-line-15::before {
  animation: typewriter-mask 0.4s steps(35) 2.9s forwards;
  width: 100%;
}

.typing-line-16::before {
  animation: typewriter-mask 0.3s steps(28) 3.3s forwards;
  width: 100%;
}

.typing-line-17::before {
  animation: typewriter-mask 0.4s steps(38) 3.6s forwards;
  width: 100%;
}

.typing-line-18::before {
  animation: typewriter-mask 0.3s steps(32) 4s forwards;
  width: 100%;
}

/* Solution renforcée pour la ligne 19 (timeLimit: 20) */
.typing-line-19 {
  min-width: 115px; /* Force une largeur minimale pour cette ligne */
  padding-right: 6px; /* Ajoute un espace supplémentaire à droite */
}

.typing-line-19::before {
  animation: typewriter-mask 0.2s steps(15) 4.3s forwards;
  width: 110%; /* Élargit le masque au-delà de la largeur du contenu */
  right: -10px; /* Déplace davantage le masque vers la droite */
}

/* Assure que le nombre 20 n'est pas coupé */
.typing-line-19 span.text-green-number {
  padding-right: 6px; /* Ajoute plus d'espace à droite du nombre */
  display: inline-block; /* Assure que le padding est respecté */
  min-width: 22px; /* Donne une largeur minimale au chiffre */
}

.typing-line-20::before {
  animation: typewriter-mask 0.15s steps(15) 4.5s forwards;
  width: 100%;
}

.typing-line-21::before {
  animation: typewriter-mask 0.1s steps(5) 4.65s forwards;
  width: 100%;
}

/* Animation du curseur pour la dernière ligne uniquement après la fin de l'animation */
.typing-line-21::after {
  visibility: visible; /* Rendre le curseur visible uniquement pour la dernière ligne */
  opacity: 0; /* Commence invisible */
  animation: blink 0.8s 4.75s infinite; /* Commence à clignoter après la fin de toute l'animation */
  right: -5px; /* Décale le curseur légèrement vers la droite pour l'éloigner du } */
}

/* Ajoute un petit espace après le dernier caractère */
.typing-line-21 {
  padding-right: 5px;
}
